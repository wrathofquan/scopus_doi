devtools::install_github("muschellij2/rscopus")
library(rscopus)
library(tidyverse)

# set api key 
set_api_key("ab61e1cdba2d467b2eec427cd82abad7")
# all ids


auth_IDs <- c(7403929333,6602245152,6602659025,25655162000,
              8047132400,7101992203,6507674939,35519275100,9276906000,
              6602921721,18436971000,6603298629,7006568493,57192260796,
              7102490362,8770813300,6701654805,7407670808,15830127900,
              14058535200,6602718522,55887917600,55533596600,6701454029,6602109336,
              37068705100,56233131300,55145777300,39763823900,56333774000,24280695400,7801310275,
              11040842000,25221349600,56527691400,56734561900,16070485100,6505821215,26035470600,
              37082851300,25943334000,36842539000,56460379100,14043520500,6508011894,26038008000,
              12140283100,8089460300,55492790500,35178352400,55854459900,24830672300,55210870300,
              56595443800,17344450400,39764257900,25224261700,14920128900,56451474100,8757062200,
              11739688400,55968910300,15026590600,37124035800,56269698500,8579741700,55824383500,
              35117578000,6507555793,8433033800,16447718500,56523580800,
              56227754200,16640497900,36680414500,7003377992,27567522100,6603058179,25825427100,35837734600,
              7003649878,34972770400,7103088398,36963322300,57191908442,6602738346,6507704058,7101948312,7202591915,
              12780208500,7005379282,8519518400,8628031000,14119143000,23969494600,7403977494,6603335237,
              55987989400,7202764313,7202076753,6602362307,7202951859,7103289434,6507143434,6505979549,
              6701599344,7003523418,6603831255,14319001200,8063630600,6603585074,6506520054,22035416700,
              6506925255,24475496600,7103189778,8370109800,15833129400,6506780122,24315252900,12795210400)
              

## loop over authorIDs
df = NULL
for (id in auth_IDs){
  x <- author_df(au_id = id, all_author_info = FALSE)
  df = rbind(df, data.frame(x))
  
}




##  atomic vector of DOI values
doi <- na.omit(df$doi)
abs <- abstract_retrieval(id = doi[2], identifier="doi")

## dataframe of references
references <- as.data.frame(abs$content$`abstracts-retrieval-response`$item$
                              bibrecord$tail$bibliography$reference) %>% 
  select(starts_with("ref.fulltext"))%>%  
  gather(id, reference, starts_with("ref.fulltext"))




